--after
exec sp_executesql N'SELECT TOP 38
_Document165_R._Date_Time AS _A1,
_Document165_R._Number AS _A2,
_Document165_R._Fld4471 AS _A3,
_Document165_R._Fld4456RRef AS _A4RRef,
_Document165_R._Fld4451RRef AS _A5RRef,
_Document165_R._Fld4461_TYPE AS _A6_TYPE,
_Document165_R._Fld4461_S AS _A6_S,
_Document165_R._Fld4461_RRRef AS _A6_RRRef,
_Document165_R._Fld4467RRef AS _A7RRef,
_Document165_R._Fld4466RRef AS _A8RRef,
_Document165_R._Fld4460 AS _A9,
_Document165_R._Fld4465RRef AS _A10RRef,
_Document165_R._IDRRef AS _A11RRef,
_Document165_R._Marked AS _A12,
_Document165_R._Posted AS _A13,
_Reference29._Description AS _A14,
_Reference11._Description AS _A15,
_Reference45._Description AS _A16,
_Reference58._Description AS _A17,
_Reference6534._Description AS _A18,
_Reference56._Description AS _A19
FROM
_Document165 _Document165_R WITH(NOLOCK)
LEFT OUTER JOIN (
SELECT
_Reference56._Description AS _Description,
_Reference56._IDRRef AS _IDRRef
FROM
_Reference56 WITH(NOLOCK)
WHERE
EXISTS(
SELECT
CAST(0. AS NUMERIC(1,0)) AS f_3
FROM
(
SELECT
0x01 AS _f_1
) #V8TblAli1
LEFT OUTER JOIN (
SELECT DISTINCT
_Reference25_VT416_Q_001_T_001._Reference25_IDRRef AS _Q_001_F_000RRef
FROM
_Reference25_VT416 _Reference25_VT416_Q_001_T_001 WITH(NOLOCK)
WHERE
_Reference25_VT416_Q_001_T_001._Fld418RRef = @P1
) #V8TblAli1_Q_000_T_002
ON 0x01 = 0x01
WHERE
NOT CAST(@P2 AS NUMERIC(1,0)) IN (SELECT TOP 1
CAST(1 AS NUMERIC(1,0)) AS _Q_002_F_000
FROM
_InfoReg5386 _InfoReg5386_Q_002_T_001 WITH(NOLOCK)
WHERE
_InfoReg5386_Q_002_T_001._Fld5387RRef = #V8TblAli1_Q_000_T_002._Q_001_F_000RRef AND CASE
WHEN _InfoReg5386_Q_002_T_001._Fld5388RRef = 0x8312b3d5d9a5fc5f404b8b411e88b5f1
THEN CASE
WHEN CAST(1 AS NUMERIC(1,0)) IN (SELECT TOP 1
CAST(1 AS NUMERIC(1,0)) AS _Q_003_F_000
FROM
_InfoReg5411 _InfoReg5411_Q_003_T_001 WITH(NOLOCK)
WHERE
_InfoReg5411_Q_003_T_001._Fld5412_RRRef = _Reference56._IDRRef AND _InfoReg5411_Q_003_T_001._Fld5412_RTRef = @P3 AND _InfoReg5411_Q_003_T_001._Fld5412_TYPE = @P4 AND _InfoReg5411_Q_003_T_001._Fld5413RRef = @P5 AND _InfoReg5411_Q_003_T_001._Fld5415RRef = _InfoReg5386_Q_002_T_001._Fld5387RRef OR
_InfoReg5411_Q_003_T_001._Fld5412_RRRef = _Reference56._IDRRef AND _InfoReg5411_Q_003_T_001._Fld5412_RTRef = @P3 AND _InfoReg5411_Q_003_T_001._Fld5412_TYPE = @P4 AND _InfoReg5411_Q_003_T_001._Fld5413RRef = @P5 AND _InfoReg5411_Q_003_T_001._Fld5415RRef = @P6)
THEN 0x01
ELSE 0x00
END
ELSE 0x01
END = @P7) AND NOT #V8TblAli1_Q_000_T_002._Q_001_F_000RRef IS NULL)
) _Reference56
ON _Document165_R._Fld4465RRef = _Reference56._IDRRef
LEFT OUTER JOIN (
SELECT
_Reference45._Description AS _Description,
_Reference45._IDRRef AS _IDRRef
FROM
_Reference45 WITH(NOLOCK)
WHERE
EXISTS(
SELECT
CAST(0. AS NUMERIC(1,0)) AS f_4
FROM
(
SELECT
0x01 AS _f_2
) #V8TblAli1
LEFT OUTER JOIN (
SELECT DISTINCT
_Reference25_VT416_Q_001_T_001._Reference25_IDRRef AS _Q_001_F_000RRef
FROM
_Reference25_VT416 _Reference25_VT416_Q_001_T_001 WITH(NOLOCK)
WHERE
_Reference25_VT416_Q_001_T_001._Fld418RRef = @P1
) #V8TblAli1_Q_000_T_002
ON 0x01 = 0x01
WHERE
NOT CAST(@P2 AS NUMERIC(1,0)) IN (SELECT TOP 1
CAST(1 AS NUMERIC(1,0)) AS _Q_002_F_000
FROM
_InfoReg5386 _InfoReg5386_Q_002_T_001 WITH(NOLOCK)
WHERE
_InfoReg5386_Q_002_T_001._Fld5387RRef = #V8TblAli1_Q_000_T_002._Q_001_F_000RRef AND CASE
WHEN _InfoReg5386_Q_002_T_001._Fld5388RRef = 0xb619785b83be1dbc4d7bea57d36db10f
THEN CASE
WHEN CAST(1 AS NUMERIC(1,0)) IN (SELECT TOP 1
CAST(1 AS NUMERIC(1,0)) AS _Q_003_F_000
FROM
_InfoReg5411 _InfoReg5411_Q_003_T_001 WITH(NOLOCK)
WHERE
_InfoReg5411_Q_003_T_001._Fld5412_RRRef = _Reference45._Fld554RRef AND _InfoReg5411_Q_003_T_001._Fld5412_RTRef = @P8 AND _InfoReg5411_Q_003_T_001._Fld5412_TYPE = @P4 AND _InfoReg5411_Q_003_T_001._Fld5413RRef = @P9 AND _InfoReg5411_Q_003_T_001._Fld5415RRef = _InfoReg5386_Q_002_T_001._Fld5387RRef OR
_InfoReg5411_Q_003_T_001._Fld5412_RRRef = _Reference45._Fld554RRef AND _InfoReg5411_Q_003_T_001._Fld5412_RTRef = @P8 AND _InfoReg5411_Q_003_T_001._Fld5412_TYPE = @P4 AND _InfoReg5411_Q_003_T_001._Fld5413RRef = @P9 AND _InfoReg5411_Q_003_T_001._Fld5415RRef = @P6)
THEN 0x01
ELSE 0x00
END
ELSE 0x01
END = @P7) AND NOT #V8TblAli1_Q_000_T_002._Q_001_F_000RRef IS NULL OR
NOT _Reference45._Folder = @P10)
) _Reference45
ON _Document165_R._Fld4461_TYPE = 0x08 AND _Document165_R._Fld4461_RRRef = _Reference45._IDRRef
LEFT OUTER JOIN _Reference6534 WITH(NOLOCK)
ON _Document165_R._Fld4466RRef = _Reference6534._IDRRef
LEFT OUTER JOIN _Reference58 WITH(NOLOCK)
ON _Document165_R._Fld4467RRef = _Reference58._IDRRef
LEFT OUTER JOIN _Reference11 WITH(NOLOCK)
ON _Document165_R._Fld4451RRef = _Reference11._IDRRef
LEFT OUTER JOIN _Reference29 WITH(NOLOCK)
ON _Document165_R._Fld4456RRef = _Reference29._IDRRef
WHERE
CAST(@P2 AS NUMERIC(1,0)) IN (SELECT TOP 1
CAST(1 AS NUMERIC(1,0)) AS _Q_001_F_000
FROM
_Reference25_VT416 _Reference25_VT416_Q_001_T_001 WITH(NOLOCK)
WHERE
NOT CAST(@P2 AS NUMERIC(1,0)) IN (SELECT TOP 1
CAST(1 AS NUMERIC(1,0)) AS _Q_002_F_000
FROM
_InfoReg5386 _InfoReg5386_Q_002_T_001 WITH(NOLOCK)
WHERE
_InfoReg5386_Q_002_T_001._Fld5387RRef = _Reference25_VT416_Q_001_T_001._Reference25_IDRRef AND CASE
WHEN _InfoReg5386_Q_002_T_001._Fld5388RRef = 0x8312b3d5d9a5fc5f404b8b411e88b5f1 AND NOT _Document165_R._Fld4465RRef = 0x00000000000000000000000000000000
THEN CASE
WHEN CAST(1 AS NUMERIC(1,0)) IN (SELECT TOP 1
CAST(1 AS NUMERIC(1,0)) AS _Q_004_F_000
FROM
(
SELECT
CAST(1 AS NUMERIC(1,0)) AS _Q_003_F_000
) #V8TblAli1_Q_004_T_001
INNER JOIN _InfoReg5411 _InfoReg5411_Q_004_T_002 WITH(NOLOCK)
ON _InfoReg5411_Q_004_T_002._Fld5412_TYPE = 0x08 AND _InfoReg5411_Q_004_T_002._Fld5412_RTRef = 0x00000038 AND _InfoReg5411_Q_004_T_002._Fld5412_RRRef = _Document165_R._Fld4465RRef AND _InfoReg5411_Q_004_T_002._Fld5413RRef = 0x8312b3d5d9a5fc5f404b8b411e88b5f1 AND (_InfoReg5411_Q_004_T_002._Fld5415RRef = _InfoReg5386_Q_002_T_001._Fld5387RRef OR
_InfoReg5411_Q_004_T_002._Fld5415RRef = 0xa598ba7ef1cb9366471c098758d5710e))
THEN 0x01
ELSE 0x00
END
WHEN _InfoReg5386_Q_002_T_001._Fld5388RRef = 0xb619785b83be1dbc4d7bea57d36db10f AND _Document165_R._Fld4461_TYPE = 0x08 AND NOT (_Document165_R._Fld4461_TYPE = 0x08 AND _Document165_R._Fld4461_RRRef = 0x00000000000000000000000000000000)
THEN CASE
WHEN CAST(1 AS NUMERIC(1,0)) IN (SELECT TOP 1
CAST(1 AS NUMERIC(1,0)) AS _Q_005_F_000
FROM
_Reference45 _Reference45_Q_005_T_001 WITH(NOLOCK)
INNER JOIN _InfoReg5411 _InfoReg5411_Q_005_T_002 WITH(NOLOCK)
ON _InfoReg5411_Q_005_T_002._Fld5412_TYPE = 0x08 AND _InfoReg5411_Q_005_T_002._Fld5412_RTRef = 0x00000016 AND _InfoReg5411_Q_005_T_002._Fld5412_RRRef = _Reference45_Q_005_T_001._Fld554RRef AND _InfoReg5411_Q_005_T_002._Fld5413RRef = 0xb619785b83be1dbc4d7bea57d36db10f AND (_InfoReg5411_Q_005_T_002._Fld5415RRef = _InfoReg5386_Q_002_T_001._Fld5387RRef OR
_InfoReg5411_Q_005_T_002._Fld5415RRef = 0xa598ba7ef1cb9366471c098758d5710e)
WHERE
_Document165_R._Fld4461_TYPE = @P4 AND _Reference45_Q_005_T_001._IDRRef = _Document165_R._Fld4461_RRRef)
THEN 0x01
ELSE 0x00
END
ELSE 0x01
END = @P7) AND _Reference25_VT416_Q_001_T_001._Fld418RRef = @P1)
ORDER BY
_Document165_R._Date_Time,
_Document165_R._IDRRef', N'@P1 varbinary(16),@P2 numeric(1,0),@P3 varbinary(4),@P4 varbinary(1),@P5 varbinary(16),@P6 varbinary(16),@P7 varbinary(1),@P8 varbinary(4),@P9 varbinary(16),@P10 varbinary(1)', 0xAC2200155D3C1B0511E1110043865FF8, 1, 0x00000038, 0x08, 0x8312B3D5D9A5FC5F404B8B411E88B5F1, 0xA598BA7EF1CB9366471C098758D5710E, 0x00, 0x00000016, 0xB619785B83BE1DBC4D7BEA57D36DB10F, 0x01